tags:
  - Chat
summary: Get chats by user ID
description: >
  Retrieves all chats that the authenticated user is a participant of.  
  The `user_id` in the query string must match the ID extracted from the JWT token.
produces:
  - application/json
parameters:
  - in: header
    name: Authorization
    required: true
    type: string
    description: "Bearer JWT token. Format: Bearer <token>"
  - in: query
    name: user_id
    required: true
    type: string
    description: ID of the authenticated user (must match token payload)
responses:
  200:
    description: List of chats the user is part of
    schema:
      type: array
      items:
        type: object
        properties:
          _id:
            type: string
            example: "9f838fa4-6129-4ff2-bb0c-23fae21e69d0"
          type:
            type: string
            example: "private"
          participants:
            type: array
            items:
              type: object
              properties:
                user_id:
                  type: string
                  example: "64ddc9288f7a123456789abc"
                role:
                  type: string
                  example: "member"
                joined_at:
                  type: string
                  format: date-time
          metadata:
            type: object
            nullable: true
          title:
            type: string
            nullable: true
          created_at:
            type: string
            format: date-time
          last_message_at:
            type: string
            format: date-time
            nullable: true
          unread_counts:
            type: object
            additionalProperties:
              type: integer
  400:
    description: Missing user_id parameter
    schema:
      type: object
      properties:
        error:
          type: string
          example: user_id is required
  403:
    description: Forbidden - user_id does not match token
    schema:
      type: object
      properties:
        error:
          type: string
          example: You can only get your own chats
  404:
    description: User or chats not found
    schema:
      type: object
      properties:
        error:
          type: string
          example: No chats found for the user

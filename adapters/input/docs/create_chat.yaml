tags:
  - Chat
summary: Create a new chat
description: >
  Creates a new chat with the specified user IDs.  
  Requires authentication via Bearer token in the Authorization header.  
  The authenticated user's ID must be included in the `user_ids` list.
consumes:
  - application/json
produces:
  - application/json
parameters:
  - in: header
    name: Authorization
    required: true
    type: string
    description: "Bearer JWT token. Format: Bearer <token>"
  - in: body
    name: body
    required: true
    description: JSON object containing the list of user IDs
    schema:
      type: object
      required:
        - user_ids
      properties:
        user_ids:
          type: array
          description: List of user IDs to include in the chat
          items:
            type: string
          example: ["64ddc9288f7a123456789abc", "64ddc9288f7a123456789def"]
responses:
  201:
    description: Chat created successfully
    schema:
      type: object
      properties:
        _id:
          type: string
          example: "9f838fa4-6129-4ff2-bb0c-23fae21e69d0"
        type:
          type: string
          example: "group"
        participants:
          type: array
          items:
            type: object
            properties:
              user_id:
                type: string
                example: "64ddc9288f7a123456789abc"
              role:
                type: string
                example: "member"
              joined_at:
                type: string
                format: date-time
        metadata:
          type: object
          nullable: true
        title:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        last_message_at:
          type: string
          format: date-time
          nullable: true
        unread_counts:
          type: object
          additionalProperties:
            type: integer
  400:
    description: Invalid input or business logic error
    schema:
      type: object
      properties:
        error:
          type: string
          example: You must include your user ID in the user_ids list
  401:
    description: Unauthorized - missing or invalid token
    schema:
      type: object
      properties:
        error:
          type: string
          example: Invalid token
        message:
          type: string
          example: Token is expired or invalid
